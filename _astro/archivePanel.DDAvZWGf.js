import{o as V,b as z}from"./attributes.C83jfZ4t.js";import{d as T,l as D,a as k,p as W,i as C,b as X,s as j,g as n,r as f,u as Z,h as p,e as w,t as O}from"./utils.BF-bo3rR.js";import{s as c}from"./render.DYhZoGHZ.js";import{e as R,i as M}from"./each.CIbpFt7y.js";import{p as tt}from"./props.Cq5h3wnR.js";import{g as et}from"./url.CXQBbsSz.js";import{i as rt}from"./translation.rYoGuXcL.js";import{I as $}from"./zh.DGCO4EKj.js";import"./language.QW22jyx0.js";import"./config.Y3KO77_0.js";import"./language.CXvH1ZyH.js";import"./preload-helper.BlTxHScW.js";const E=" / ";function b(i){if(!i)return null;if(typeof i=="string"){const r=i.trim();if(!r)return null;const l=r.split(E).map(a=>a.trim()).filter(a=>a.length>0);return l.length>0?l:null}if(Array.isArray(i)){const r=i.filter(l=>typeof l=="string");if(r.length===i.length){const l=r.map(a=>a.trim()).filter(a=>a.length>0);return l.length>0?l:null}for(const l of i){const a=b(l);if(a&&a.length>0)return a}return null}if(typeof i=="object"){const r=Object.keys(i);for(const l of r){const a=l.trim();if(!a)continue;const m=i[l],v=b(m);return v?[a,...v]:[a]}return null}return null}function it(i){const r=b(i);return r?r.join(E):null}function at(i){return i?Array.isArray(i)?i.map(r=>String(r).trim()).filter(r=>r.length>0):typeof i=="string"?i.split(",").map(r=>r.trim()).filter(r=>r.length>0):[]:[]}var st=C(`<a class="group btn-plain block! h-10 w-full rounded-lg hover:text-[initial]"><div class="flex flex-row justify-start items-center h-full"><div class="w-[15%] md:w-[10%] transition text-sm text-right text-50"> </div> <div class="w-[15%] md:w-[10%] relative dash-line h-full flex items-center"><div class="transition-all mx-auto w-1 h-1 rounded group-hover:h-5
                                bg-[oklch(0.5_0.05_var(--hue))] group-hover:bg-(--primary)
                                outline-4 z-50
                                outline-(--card-bg)
                                group-hover:outline-(--btn-plain-bg-hover)
                                group-active:outline-(--btn-plain-bg-active)"></div></div> <div class="w-[70%] md:max-w-[65%] md:w-[65%] text-left font-bold
                            group-hover:translate-x-1 transition-all group-hover:text-(--primary)
                            text-75 pr-8 whitespace-nowrap text-ellipsis overflow-hidden"> </div> <div class="hidden md:block md:w-[15%] text-left text-sm transition whitespace-nowrap text-ellipsis overflow-hidden text-30"> </div></div></a>`),nt=C('<div><div class="flex flex-row w-full items-center h-15"><div class="w-[15%] md:w-[10%] transition text-2xl font-bold text-right text-75"> </div> <div class="w-[15%] md:w-[10%]"><div class="h-3 w-3 bg-none rounded-full outline-solid outline-(--primary) mx-auto outline-offset-2 z-50 outline-3"></div></div> <div class="w-[70%] md:w-[80%] transition text-left text-50"> </div></div> <!></div>'),lt=C("<div></div>");function bt(i,r){X(r,!0);let l=tt(r,"sortedPosts",19,()=>[]),a=T(D([])),m=T(D([])),v=T(null);V(()=>{const e=new URLSearchParams(window.location.search);j(a,e.has("tag")?e.getAll("tag"):[],!0),j(m,e.has("category")?e.getAll("category"):[],!0),j(v,e.get("uncategorized"),!0)});function L(e){const o=new Date(e),d=(o.getMonth()+1).toString().padStart(2,"0"),t=o.getDate().toString().padStart(2,"0");return`${d}-${t}`}function N(e){return e.map(o=>`#${o}`).join(" ")}function U(e,o){const d=b(e);return!d||d.length===0?!1:o.some(t=>{const s=t.split(" / ").map(u=>u.trim()).filter(u=>u.length>0);return s.length===0||s.length>d.length?!1:s.every((u,x)=>u===d[x])})}let Y=Z(()=>{let e=l().map(t=>({...t,data:{...t.data,published:new Date(t.data.published)}}));n(a).length>0&&(e=e.filter(t=>at(t.data.tags).some(u=>n(a).includes(u)))),n(m).length>0&&(e=e.filter(t=>U(t.data.category,n(m)))),n(v)!==null&&(e=e.filter(t=>!it(t.data.category))),e=e.slice().sort((t,s)=>s.data.published.getTime()-t.data.published.getTime());const o=e.reduce((t,s)=>{const u=s.data.published.getFullYear();return t[u]||(t[u]=[]),t[u].push(s),t},{}),d=Object.keys(o).map(t=>({year:Number.parseInt(t,10),posts:o[Number.parseInt(t,10)]}));return d.sort((t,s)=>s.year-t.year),d});var y=lt();R(y,21,()=>n(Y),M,(e,o)=>{var d=nt(),t=p(d),s=p(t),u=p(s,!0);f(s);var x=w(s,4),F=p(x);f(x),f(t);var G=w(t,2);R(G,17,()=>n(o).posts,M,(_,h)=>{var g=st(),S=p(g),P=p(S),K=p(P,!0);f(P);var A=w(P,4),q=p(A,!0);f(A);var I=w(A,2),B=p(I,!0);f(I),f(S),f(g),O((H,J,Q)=>{z(g,"href",H),z(g,"aria-label",n(h).data.title),c(K,J),c(q,n(h).data.title),c(B,Q)},[()=>et(n(h)),()=>L(n(h).data.published),()=>N(n(h).data.tags)]),k(_,g)}),f(d),O(_=>{c(u,n(o).year),c(F,`${n(o).posts.length??""} ${_??""}`)},[()=>rt(n(o).posts.length===1?$.postCount:$.postsCount)]),k(e,d)}),f(y),k(i,y),W()}export{bt as default};

import{o as V,a as X,s as Y}from"./attributes.C83jfZ4t.js";import{j as Z,c as tt,f as _,a as l,p as at,b as et,s as n,g as t,d as h,h as c,r as o,e as m,t as T,u as rt,k as D,i as p}from"./utils.BF-bo3rR.js";import{s as I}from"./render.DYhZoGHZ.js";import{i as O}from"./if.Dj7Rl1Ca.js";import{e as st,i as nt}from"./each.CIbpFt7y.js";import{I as ot}from"./Icon.BA2fRTHK.js";import{B as it}from"./breakpoints.CwWlcWLj.js";import{g as lt,a as ct,b as dt,s as mt}from"./language.CXvH1ZyH.js";import{o as pt}from"./widget.tcM_-dYY.js";import{s as ut}from"./config.Y3KO77_0.js";import{g as ft}from"./language.QW22jyx0.js";import{D as gt}from"./DropdownItem.BZuqiuHT.js";import{D as vt}from"./DropdownPanel.CwswbyJw.js";/* empty css                          */import"./branches.Bq-utdqE.js";import"./props.Cq5h3wnR.js";import"./preload-helper.BlTxHScW.js";import"./snippet.DGuVYylQ.js";import"./this.BlPD0caW.js";var wt=p('<span class="ml-auto text-(--primary)">✓</span>'),_t=p('<span class="text-lg transition"> </span> <span class="text-sm transition grow text-left"> </span> <!>',1),ht=p('<div class="text-sm font-medium text-(--primary) mb-3 px-1">选择语言 / Select Language</div> <div class="grid grid-cols-1 gap-2 max-h-64 overflow-y-auto svelte-oywurh"></div>',1),xt=p('<div class="relative z-50"><button aria-label="Language Translation" class="btn-plain scale-animation rounded-lg h-11 w-11 active:scale-90" id="translate-switch"><!></button> <div id="translate-panel-wrapper"><!></div></div>');function Nt(E,j){et(j,!0);let r=h(!1),x=h(void 0),d=h("");const z=ft();lt(ct());function A(){n(r,!t(r))}function L(){n(r,!0)}function B(){n(r,!1)}async function F(a){try{if(!window.translateScriptLoaded&&typeof window.loadTranslateScript=="function"&&await window.loadTranslateScript(),!window.translate){console.warn("translate.js is not loaded");return}const e=window.translate,s=e.language.getLocal();e.changeLanguage(a),a===s&&e.reset(),mt(a),n(d,a,!0)}catch(e){console.error("Failed to execute translation:",e)}}function b(a){t(r)&&pt(a,"translate-panel","translate-switch",()=>{n(r,!1)})}V(()=>{document.addEventListener("click",b),n(d,dt(),!0)}),X(()=>{typeof document<"u"&&document.removeEventListener("click",b)});var y=tt(),C=_(y);{var G=a=>{var e=xt(),s=c(e);s.__click=()=>{window.innerWidth<it?L():A()};var K=c(s);ot(K,{icon:"material-symbols:translate",class:"text-[1.25rem] transition"}),o(s);var u=m(s,2);let k;var M=c(u);vt(M,{id:"translate-panel",class:"p-4 w-full",get element(){return t(x)},set element(f){n(x,f,!0)},children:(f,Lt)=>{var $=ht(),P=m(_($),2);st(P,21,()=>z,nt,(N,i)=>{{let R=rt(()=>t(d)===t(i).code);gt(N,{get isActive(){return t(R)},onclick:()=>F(t(i).code),class:"gap-3 p-2! h-auto!",isLast:!1,children:(W,bt)=>{var S=_t(),g=_(S),q=c(g,!0);o(g);var v=m(g,2),H=c(v,!0);o(v);var J=m(v,2);{var Q=w=>{var U=wt();l(w,U)};O(J,w=>{t(d)===t(i).code&&w(Q)})}T(()=>{I(q,t(i).icon),I(H,t(i).name)}),l(W,S)},$$slots:{default:!0}})}}),o(P),l(f,$)},$$slots:{default:!0}}),o(u),o(e),T(()=>k=Y(u,1,"fixed top-14.5 pt-5 right-4 w-[calc(100vw-2rem)] max-w-64 md:absolute md:top-11 md:right-0 md:w-64 md:pt-5 transition-all z-50",null,k,{"float-panel-closed":!t(r)})),D("mouseleave",e,B),D("mouseenter",s,L),l(a,e)};O(C,a=>{ut.translate?.enable&&a(G)})}l(E,y),at()}Z(["click"]);export{Nt as default};

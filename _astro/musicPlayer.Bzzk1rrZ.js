import{o as Ma,a as Ua,s as K,b as Y,d as $t}from"./attributes.C83jfZ4t.js";import{af as Da,a7 as Oa,aU as $a,aV as Ca,a5 as Na,q as Ga,aW as Va,aX as ja,a1 as Ba,aY as Te,aZ as jt,j as qa,d as f,l as Oe,c as ye,k as Ct,f as ue,a as Z,p as Wa,b as za,s as t,g as e,a_ as Nt,e as m,h as u,r as o,t as $e,i as be,u as Ha}from"./utils.BF-bo3rR.js";import{a as Xa,s as ce}from"./render.DYhZoGHZ.js";import{i as H}from"./if.Dj7Rl1Ca.js";import{e as Ka,i as Ya}from"./each.CIbpFt7y.js";import{b as Gt}from"./this.BlPD0caW.js";import{I as S}from"./Icon.BA2fRTHK.js";import{m as J}from"./config.Y3KO77_0.js";import{i as U}from"./translation.rYoGuXcL.js";import{I as D}from"./zh.DGCO4EKj.js";/* empty css                          */import"./branches.Bq-utdqE.js";import"./props.Cq5h3wnR.js";import"./language.CXvH1ZyH.js";import"./preload-helper.BlTxHScW.js";import"./language.QW22jyx0.js";const Za=()=>performance.now(),ie={tick:d=>requestAnimationFrame(d),now:()=>Za(),tasks:new Set};function Bt(){const d=ie.now();ie.tasks.forEach(n=>{n.c(d)||(ie.tasks.delete(n),n.f())}),ie.tasks.size!==0&&ie.tick(Bt)}function Ja(d){let n;return ie.tasks.size===0&&ie.tick(Bt),{promise:new Promise(p=>{ie.tasks.add(n={c:d,f:p})}),abort(){ie.tasks.delete(n)}}}function Ce(d,n){jt(()=>{d.dispatchEvent(new CustomEvent(n))})}function Qa(d){if(d==="float")return"cssFloat";if(d==="offset")return"cssOffset";if(d.startsWith("--"))return d;const n=d.split("-");return n.length===1?n[0]:n[0]+n.slice(1).map(p=>p[0].toUpperCase()+p.slice(1)).join("")}function Vt(d){const n={},p=d.split(";");for(const E of p){const[O,k]=E.split(":");if(!O||k===void 0)break;const $=Qa(O.trim());n[$]=k.trim()}return n}const er=d=>d;function tr(d,n,p,E){var O=(d&Va)!==0,k="both",$,B=n.inert,N=n.style.overflow,l,s;function r(){return jt(()=>$??=p()(n,E?.()??{},{direction:k}))}var q={is_global:O,in(){n.inert=B,l=it(n,r(),s,1,()=>{Ce(n,"introend"),l?.abort(),l=$=void 0,n.style.overflow=N})},out(_){n.inert=!0,s=it(n,r(),l,0,()=>{Ce(n,"outroend"),_?.()})},stop:()=>{l?.abort(),s?.abort()}},G=Da;if((G.nodes.t??=[]).push(q),Xa){var g=O;if(!g){for(var v=G.parent;v&&(v.f&Oa)!==0;)for(;(v=v.parent)&&(v.f&$a)===0;);g=!v||(v.f&Ca)!==0}g&&Na(()=>{Ga(()=>q.in())})}}function it(d,n,p,E,O){var k=E===1;if(ja(n)){var $,B=!1;return Ba(()=>{if(!B){var _=n({direction:k?"in":"out"});$=it(d,_,p,E,O)}}),{abort:()=>{B=!0,$?.abort()},deactivate:()=>$.deactivate(),reset:()=>$.reset(),t:()=>$.t()}}if(p?.deactivate(),!n?.duration&&!n?.delay)return Ce(d,k?"introstart":"outrostart"),O(),{abort:Te,deactivate:Te,reset:Te,t:()=>E};const{delay:N=0,css:l,tick:s,easing:r=er}=n;var q=[];if(k&&p===void 0&&(s&&s(0,1),l)){var G=Vt(l(0,1));q.push(G,G)}var g=()=>1-E,v=d.animate(q,{duration:N,fill:"forwards"});return v.onfinish=()=>{v.cancel(),Ce(d,k?"introstart":"outrostart");var _=p?.t()??1-E;p?.abort();var y=E-_,M=n.duration*Math.abs(y),P=[];if(M>0){var A=!1;if(l)for(var te=Math.ceil(M/16.666666666666668),I=0;I<=te;I+=1){var V=_+y*r(I/te),R=Vt(l(V,1-V));P.push(R),A||=R.overflow==="hidden"}A&&(d.style.overflow="hidden"),g=()=>{var W=v.currentTime;return _+y*r(W/M)},s&&Ja(()=>{if(v.playState!=="running")return!1;var W=g();return s(W,1-W),!0})}v=d.animate(P,{duration:M,fill:"forwards"}),v.onfinish=()=>{g=()=>E,s?.(E,1-E),O()}},{abort:()=>{v&&(v.cancel(),v.effect=null,v.onfinish=Te)},deactivate:()=>{O=Te},reset:()=>{E===0&&s?.(1,0)},t:()=>g()}}function ar(d){const n=d-1;return n*n*n+1}function rr(d,{delay:n=0,duration:p=400,easing:E=ar,axis:O="y"}={}){const k=getComputedStyle(d),$=+k.opacity,B=O==="y"?"height":"width",N=parseFloat(k[B]),l=O==="y"?["top","bottom"]:["left","right"],s=l.map(y=>`${y[0].toUpperCase()}${y.slice(1)}`),r=parseFloat(k[`padding${s[0]}`]),q=parseFloat(k[`padding${s[1]}`]),G=parseFloat(k[`margin${s[0]}`]),g=parseFloat(k[`margin${s[1]}`]),v=parseFloat(k[`border${s[0]}Width`]),_=parseFloat(k[`border${s[1]}Width`]);return{delay:n,duration:p,easing:E,css:y=>`overflow: hidden;opacity: ${Math.min(y*20,1)*$};${B}: ${y*N}px;padding-${l[0]}: ${y*r}px;padding-${l[1]}: ${y*q}px;margin-${l[0]}: ${y*G}px;margin-${l[1]}: ${y*g}px;border-${l[0]}-width: ${y*v}px;border-${l[1]}-width: ${y*_}px;min-${B}: 0`}}var ir=be('<div class="music-player-error fixed bottom-20 right-4 z-60 max-w-sm onload-animation-up"><div class="bg-red-500 text-white px-4 py-3 rounded-lg shadow-lg flex items-center gap-3 animate-slide-up"><!> <span class="text-sm flex-1"> </span> <button class="text-white/80 hover:text-white transition-colors"><!></button></div></div>'),lr=be('<span class="text-sm text-(--content-meta)"></span>'),nr=be('<div role="button" tabindex="0"><div class="w-6 h-6 flex items-center justify-center"><!></div> <div class="w-10 h-10 rounded-lg overflow-hidden shrink-0 shadow-sm"><img class="w-full h-full object-cover"/></div> <div class="flex-1 min-w-0"><div> </div> <div> </div></div></div>'),sr=be('<div class="playlist-panel float-panel w-80 max-h-96 overflow-hidden z-50 mb-4 pointer-events-auto"><div class="playlist-header flex items-center justify-between p-4 border-b border-(--line-divider)"><h3 class="text-lg font-semibold text-90"> </h3> <button class="btn-plain w-8 h-8 rounded-lg"><!></button></div> <div class="playlist-content overflow-y-auto max-h-80"></div></div>'),or=be('<div class="flex space-x-0.5"><div class="w-0.5 h-3 bg-white rounded-full animate-pulse"></div> <div class="w-0.5 h-4 bg-white rounded-full animate-pulse" style="animation-delay: 150ms;"></div> <div class="w-0.5 h-2 bg-white rounded-full animate-pulse" style="animation-delay: 300ms;"></div></div>'),ur=be('<!> <div><!> <div role="button" tabindex="0"><!></div> <div><div class="flex items-center gap-4 mb-4"><div class="cover-container relative w-16 h-16 rounded-full overflow-hidden shrink-0"><img alt="封面"/></div> <div class="flex-1 min-w-0"><div class="song-title text-lg font-bold text-90 truncate mb-1"> </div> <div class="song-artist text-sm text-50 truncate"> </div> <div class="text-xs text-30 mt-1"> </div></div> <div class="flex items-center gap-1"><button class="btn-plain w-8 h-8 rounded-lg flex items-center justify-center"><!></button> <button><!></button></div></div> <div class="progress-section mb-4"><div class="progress-bar flex-1 h-2 bg-(--btn-regular-bg) rounded-full cursor-pointer" role="slider" tabindex="0" aria-valuemin="0" aria-valuemax="100"><div class="h-full bg-(--primary) rounded-full transition-all duration-100"></div></div></div> <div class="controls flex items-center justify-center gap-2 mb-4"><button><!></button> <button class="btn-plain w-10 h-10 rounded-lg"><!></button> <button><!></button> <button class="btn-plain w-10 h-10 rounded-lg"><!></button> <button><!></button></div> <div class="bottom-controls flex items-center gap-2"><button class="btn-plain w-8 h-8 rounded-lg"><!></button> <div class="flex-1 h-2 bg-(--btn-regular-bg) rounded-full cursor-pointer" role="slider" tabindex="0" aria-valuemin="0" aria-valuemax="100"><div></div></div> <button class="btn-plain w-8 h-8 rounded-lg flex items-center justify-center"><!></button></div></div></div>',1);function Ir(d,n){za(n,!0);let p=f(Oe(J.mode??"meting")),E=J.meting?.meting_api??"https://api.i-meto.com/meting/api",O=J.meting?.server??"netease",k=J.meting?.type??"playlist",$=J.meting?.id??"2161912966",B=f(Oe(J.autoplay??!1)),N=f(Oe({id:0,title:"Music",artist:"Artist",cover:"/favicon/icon-light.ico",url:"",duration:0})),l=f(Oe([])),s=f(0),r=f(void 0),q=f(void 0),G=f(void 0),g=f(!1),v=f(!1),_=f(!0),y=f(!1),M=f(0),P=f(0),A=f(.75),te=f(!1),I=f(!1),V=f(!1),R=f(0),W=f(0),lt=0,nt=f(""),Le=f(!1),w=null;function Pe(a,b=2e3){if(!e(r))return;w&&clearInterval(w);const x=0,z=Date.now();e(r).volume=x,w=window.setInterval(()=>{if(!e(r)||e(te)){w&&(clearInterval(w),w=null);return}const ne=Date.now()-z,j=Math.min(ne/b,1),ve=x+(a-x)*j;e(r).volume=ve,j>=1&&w&&(clearInterval(w),w=null)},50)}const T={USER_PAUSED:"player_user_paused",VOLUME:"player_volume",SHUFFLE:"player_shuffle",REPEAT:"player_repeat",LAST_SONG_ID:"player_last_song_id",LAST_SONG_PROGRESS:"player_last_song_progress"};function Ne(){if(e(l).length!==0){if(typeof localStorage<"u"){const a=localStorage.getItem(T.LAST_SONG_ID);let b=-1;if(a&&(b=e(l).findIndex(x=>x.id!==void 0&&String(x.id)===String(a))),b!==-1){t(s,b,!0);const x=localStorage.getItem(T.LAST_SONG_PROGRESS);x&&t(W,parseFloat(x),!0),Be(e(l)[e(s)]);return}}t(s,0),Be(e(l)[0])}}function de(a){t(nt,a,!0),t(Le,!0),setTimeout(()=>{t(Le,!1)},3e3)}async function st(){if(!E||!$)return;t(I,!0);const a=new URLSearchParams({server:O,type:k,id:$}),b=E.includes("?")?"&":"?",x=`${E}${b}${a.toString()}`;try{const z=await fetch(x);if(!z.ok)throw new Error("meting api error");const ne=await z.json();t(l,ne.map((j,ve)=>{let ze=j.name??j.title??U(D.musicUnknownTrack),ae=j.artist??j.author??U(D.musicUnknownArtist),Q=j.duration??0;return Q>1e4&&(Q=Math.floor(Q/1e3)),(!Number.isFinite(Q)||Q<=0)&&(Q=0),{id:j.id??`meting-${ve}`,title:ze,artist:ae,cover:j.pic??"",url:j.url??"",duration:Q}}),!0),e(l).length>0&&setTimeout(()=>{Ne()},0),t(I,!1)}catch{de(U(D.musicMetingFailed)),t(I,!1)}}async function qt(){J.enable&&(t(p,e(p)==="meting"?"local":"meting",!0),t(y,!1),t(I,!1),t(g,!1),t(s,0),t(l,[],!0),e(r)&&(e(r).pause(),e(r).currentTime=0),t(M,0),t(P,0),e(p)==="meting"?await st():(t(l,[...J.local?.playlist??[]],!0),e(l).length>0?setTimeout(()=>{Ne()},0):de(U(D.musicEmptyPlaylist))))}function Wt(){if(!(!e(r)||!e(N).url))if(e(g))w&&(clearInterval(w),w=null),e(r).pause(),typeof localStorage<"u"&&localStorage.setItem(T.USER_PAUSED,"true");else{const a=e(r).play();a!==void 0&&a.then(()=>{Pe(e(A))}).catch(()=>{}),typeof localStorage<"u"&&localStorage.setItem(T.USER_PAUSED,"false")}}function Ge(){t(_,!e(_)),e(_)&&t(y,!1)}function ot(){t(y,!e(y))}function zt(){t(V,!e(V)),e(V)&&t(R,0),typeof localStorage<"u"&&(localStorage.setItem(T.SHUFFLE,String(e(V))),localStorage.setItem(T.REPEAT,String(e(R))))}function Ht(){t(R,(e(R)+1)%3),e(R)!==0&&t(V,!1),typeof localStorage<"u"&&(localStorage.setItem(T.REPEAT,String(e(R))),localStorage.setItem(T.SHUFFLE,String(e(V))))}function Xt(){if(e(l).length<=1)return;const a=e(s)>0?e(s)-1:e(l).length-1;Ae(a)}function Ve(){if(e(l).length<=1)return;let a;if(e(V))do a=Math.floor(Math.random()*e(l).length);while(a===e(s)&&e(l).length>1);else a=e(s)<e(l).length-1?e(s)+1:0;Ae(a)}function Ae(a){a<0||a>=e(l).length||(t(s,a,!0),t(v,!0),typeof localStorage<"u"&&localStorage.setItem(T.USER_PAUSED,"false"),t(W,0),Be(e(l)[e(s)]))}function je(a){return a.startsWith("http://")||a.startsWith("https://")||a.startsWith("/")?a:`/${a}`}function Be(a){!a||!e(r)||(t(N,{...a},!0),typeof localStorage<"u"&&a.id!==void 0&&a.id!==0&&(localStorage.setItem(T.LAST_SONG_ID,String(a.id)),e(W)<=0&&localStorage.setItem(T.LAST_SONG_PROGRESS,"0")),a.url?(t(I,!0),e(W)>0?t(M,e(W),!0):(e(r).currentTime=0,t(M,0)),t(P,a.duration??0,!0),e(r).removeEventListener("canplay",ut),e(r).removeEventListener("error",dt),e(r).removeEventListener("loadstart",ft),e(r).addEventListener("canplay",ut,{once:!0}),e(r).addEventListener("error",dt,{once:!0}),e(r).addEventListener("loadstart",ft,{once:!0}),e(r).src=je(a.url),e(r).load()):t(I,!1))}let xe=f(!1);function ut(){if(t(I,!1),e(r)?.duration&&e(r).duration>1&&(t(P,Math.floor(e(r).duration),!0),e(l)[e(s)]&&(e(l)[e(s)].duration=e(P)),e(N).duration=e(P)),e(W)>0&&e(r)){const a=Math.min(e(W),e(P)>0?e(P):1/0);e(r).currentTime=a,t(M,a,!0),t(W,0)}if(e(B)||e(g)||e(v)){const a=e(r)?.play();a!==void 0&&a.then(()=>{Pe(e(A)),t(B,!1),t(xe,!1),t(v,!1)}).catch(b=>{de(U(D.musicAutoplayBlocked)),t(xe,!0),t(g,!1),t(v,!1)})}}function ct(){if(e(xe)&&e(r)&&!e(g)){const a=e(r).play();a!==void 0&&a.then(()=>{Pe(e(A)),t(xe,!1)}).catch(()=>{})}}function dt(a){t(I,!1),de(U(D.musicPlayFailed).replace("{0}",e(N).title)),e(l).length>1?setTimeout(()=>Ve(),1e3):de(U(D.musicNoSongsAvailable))}function ft(){}function Kt(){t(Le,!1)}function Yt(a){if(!e(r)||!e(q))return;const b=e(q).getBoundingClientRect(),z=(a.clientX-b.left)/b.width*e(P);e(r).currentTime=z,t(M,z)}let Re=f(!1),qe=f(!1),We=f(null),fe=f(null);function Zt(a){e(G)&&(t(qe,!0),t(We,e(G).getBoundingClientRect(),!0),vt(a.clientX))}function Jt(a){e(qe)&&(t(Re,!0),!e(fe)&&t(fe,requestAnimationFrame(()=>{vt(a.clientX),t(fe,null)}),!0))}function Qt(){t(qe,!1),t(Re,!1),t(We,null),e(fe)&&(cancelAnimationFrame(e(fe)),t(fe,null))}function vt(a){if(!e(r)||!e(G))return;w&&(clearInterval(w),w=null);const b=e(We)||e(G).getBoundingClientRect(),x=Math.max(0,Math.min(1,(a-b.left)/b.width));t(A,x,!0),e(r).volume=e(A),t(te,e(A)===0),typeof localStorage<"u"&&localStorage.setItem(T.VOLUME,String(e(A)))}function mt(){e(r)&&(w&&(clearInterval(w),w=null),t(te,!e(te)),e(r).muted=e(te))}function pt(a){if(!Number.isFinite(a)||a<0)return"0:00";const b=Math.floor(a/60),x=Math.floor(a%60);return`${b}:${x.toString().padStart(2,"0")}`}function ea(){e(r)&&(e(r).addEventListener("play",()=>{t(g,!0),t(xe,!1),t(B,!1),typeof localStorage<"u"&&localStorage.setItem(T.USER_PAUSED,"false")}),e(r).addEventListener("pause",()=>{t(g,!1)}),e(r).addEventListener("timeupdate",()=>{if(!e(r))return;t(M,e(r).currentTime,!0);const a=Date.now();a-lt>2100&&typeof localStorage<"u"&&e(N).id!==0&&(localStorage.setItem(T.LAST_SONG_PROGRESS,String(e(M))),lt=a)}),e(r).addEventListener("ended",()=>{e(r)&&(typeof localStorage<"u"&&localStorage.setItem(T.LAST_SONG_PROGRESS,"0"),e(R)===1?(e(r).currentTime=0,e(r).play().then(()=>{Pe(e(A))}).catch(()=>{})):e(R)===2||e(V)||e(R)===0&&e(s)<e(l).length-1?Ve():t(g,!1))}),e(r).addEventListener("error",a=>{t(I,!1)}),e(r).addEventListener("stalled",()=>{}),e(r).addEventListener("waiting",()=>{}))}const gt=["click","keydown","touchstart"];Ma(()=>{if(typeof localStorage<"u"){localStorage.getItem(T.USER_PAUSED)==="true"&&t(B,!1);const b=localStorage.getItem(T.VOLUME);b!==null&&t(A,parseFloat(b),!0);const x=localStorage.getItem(T.SHUFFLE);x!==null&&t(V,x==="true");const z=localStorage.getItem(T.REPEAT);z!==null&&t(R,parseInt(z),!0)}t(r,new Audio,!0),e(r).volume=e(A),ea(),gt.forEach(a=>{document.addEventListener(a,ct,{capture:!0})}),J.enable&&(e(p)==="meting"?st():(t(l,[...J.local?.playlist??[]],!0),e(l).length>0?setTimeout(()=>{Ne()},0):de(U(D.musicEmptyPlaylist))))}),Ua(()=>{w&&(clearInterval(w),w=null),typeof document<"u"&&gt.forEach(a=>{document.removeEventListener(a,ct,{capture:!0})}),e(r)&&(e(r).pause(),e(r).src="")});var _t=ye();Ct("mousemove",Nt,Jt),Ct("mouseup",Nt,Qt);var ta=ue(_t);{var aa=a=>{var b=ur(),x=ue(b);{var z=i=>{var h=ir(),F=u(h),L=u(F);S(L,{icon:"material-symbols:error",class:"text-xl shrink-0"});var C=m(L,2),c=u(C,!0);o(C);var re=m(C,2);re.__click=Kt;var ge=u(re);S(ge,{icon:"material-symbols:close",class:"text-lg"}),o(re),o(F),o(h),$e(()=>ce(c,e(nt))),Z(i,h)};H(x,i=>{e(Le)&&i(z)})}var ne=m(x,2);let j;var ve=u(ne);{var ze=i=>{var h=sr(),F=u(h),L=u(F),C=u(L,!0);o(L);var c=m(L,2);c.__click=ot;var re=u(c);S(re,{icon:"material-symbols:close",class:"text-lg"}),o(c),o(F);var ge=m(F,2);Ka(ge,21,()=>e(l),Ya,(Ie,_e,ee)=>{var oe=nr();let At;oe.__click=()=>Ae(ee),oe.__keydown=X=>{(X.key==="Enter"||X.key===" ")&&(X.preventDefault(),Ae(ee))};var tt=u(oe),ka=u(tt);{var Ia=X=>{S(X,{icon:"material-symbols:graphic-eq",class:"text-(--primary) animate-pulse"})},Ta=X=>{var Dt=ye(),Aa=ue(Dt);{var Ra=he=>{S(he,{icon:"material-symbols:pause",class:"text-(--primary)"})},Fa=he=>{var Ot=lr();Ot.textContent=ee+1,Z(he,Ot)};H(Aa,he=>{ee===e(s)?he(Ra):he(Fa,!1)},!0)}Z(X,Dt)};H(ka,X=>{ee===e(s)&&e(g)?X(Ia):X(Ta,!1)})}o(tt);var at=m(tt,2),Rt=u(at);o(at);var Ft=m(at,2),De=u(Ft);let Mt;var La=u(De,!0);o(De);var rt=m(De,2);let Ut;var Pa=u(rt,!0);o(rt),o(Ft),o(oe),$e(X=>{At=K(oe,1,"playlist-item flex items-center gap-3 p-3 hover:bg-(--btn-plain-bg-hover) cursor-pointer transition-colors",null,At,{"bg-(--btn-plain-bg)":ee===e(s),"text-(--primary)":ee===e(s)}),Y(oe,"aria-label",`播放 ${e(_e).title??""} - ${e(_e).artist??""}`),Y(Rt,"src",X),Y(Rt,"alt",e(_e).title),Mt=K(De,1,"font-medium truncate",null,Mt,{"text-(--primary)":ee===e(s),"text-90":ee!==e(s)}),ce(La,e(_e).title),Ut=K(rt,1,"text-sm text-(--content-meta) truncate",null,Ut,{"text-(--primary)":ee===e(s)}),ce(Pa,e(_e).artist)},[()=>je(e(_e).cover)]),Z(Ie,oe)}),o(ge),o(h),$e(Ie=>ce(C,Ie),[()=>U(D.playlist)]),tr(3,h,()=>rr,()=>({duration:300,axis:"y"})),Z(i,h)};H(ve,i=>{e(y)&&i(ze)})}var ae=m(ve,2);let Q;ae.__click=Ge,ae.__keydown=i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),Ge())};var ra=u(ae);{var ia=i=>{S(i,{icon:"eos-icons:loading",class:"text-white text-lg"})},la=i=>{var h=ye(),F=ue(h);{var L=c=>{var re=or();Z(c,re)},C=c=>{S(c,{icon:"material-symbols:music-note",class:"text-white text-lg"})};H(F,c=>{e(g)?c(L):c(C,!1)},!0)}Z(i,h)};H(ra,i=>{e(I)?i(ia):i(la,!1)})}o(ae);var He=m(ae,2);let ht;var Xe=u(He),Ke=u(Xe),yt=u(Ke);let bt;o(Ke);var Ye=m(Ke,2),Ze=u(Ye),na=u(Ze,!0);o(Ze);var Je=m(Ze,2),sa=u(Je,!0);o(Je);var xt=m(Je,2),oa=u(xt);o(xt),o(Ye);var St=m(Ye,2),Se=u(St);Se.__click=qt;var ua=u(Se);{let i=Ha(()=>e(p)==="meting"?"material-symbols:cloud":"material-symbols:folder");S(ua,{get icon(){return e(i)},class:"text-lg"})}o(Se);var we=m(Se,2);let wt;we.__click=ot;var ca=u(we);S(ca,{icon:"material-symbols:queue-music",class:"text-lg"}),o(we),o(St),o(Xe);var Qe=m(Xe,2),se=u(Qe);se.__click=Yt,se.__keydown=i=>{if((i.key==="Enter"||i.key===" ")&&(i.preventDefault(),e(q)?.getBoundingClientRect())){const L=.5*e(P);e(r)&&(e(r).currentTime=L,t(M,L))}};var da=u(se);o(se),Gt(se,i=>t(q,i),()=>e(q)),o(Qe);var et=m(Qe,2),me=u(et);let Et;me.__click=zt;var fa=u(me);S(fa,{icon:"material-symbols:shuffle",class:"text-lg"}),o(me);var Ee=m(me,2);Ee.__click=Xt;var va=u(Ee);S(va,{icon:"material-symbols:skip-previous",class:"text-xl"}),o(Ee);var pe=m(Ee,2);let kt;pe.__click=Wt;var ma=u(pe);{var pa=i=>{S(i,{icon:"eos-icons:loading",class:"text-xl"})},ga=i=>{var h=ye(),F=ue(h);{var L=c=>{S(c,{icon:"material-symbols:pause",class:"text-xl"})},C=c=>{S(c,{icon:"material-symbols:play-arrow",class:"text-xl"})};H(F,c=>{e(g)?c(L):c(C,!1)},!0)}Z(i,h)};H(ma,i=>{e(I)?i(pa):i(ga,!1)})}o(pe);var ke=m(pe,2);ke.__click=Ve;var _a=u(ke);S(_a,{icon:"material-symbols:skip-next",class:"text-xl"}),o(ke);var Fe=m(ke,2);let It;Fe.__click=Ht;var ha=u(Fe);{var ya=i=>{S(i,{icon:"material-symbols:repeat-one",class:"text-lg"})},ba=i=>{var h=ye(),F=ue(h);{var L=c=>{S(c,{icon:"material-symbols:repeat",class:"text-lg"})},C=c=>{S(c,{icon:"material-symbols:repeat",class:"text-lg opacity-50"})};H(F,c=>{e(R)===2?c(L):c(C,!1)},!0)}Z(i,h)};H(ha,i=>{e(R)===1?i(ya):i(ba,!1)})}o(Fe),o(et);var Tt=m(et,2),Me=u(Tt);Me.__click=mt;var xa=u(Me);{var Sa=i=>{S(i,{icon:"material-symbols:volume-off",class:"text-lg"})},wa=i=>{var h=ye(),F=ue(h);{var L=c=>{S(c,{icon:"material-symbols:volume-down",class:"text-lg"})},C=c=>{S(c,{icon:"material-symbols:volume-up",class:"text-lg"})};H(F,c=>{e(A)<.5?c(L):c(C,!1)},!0)}Z(i,h)};H(xa,i=>{e(te)||e(A)===0?i(Sa):i(wa,!1)})}o(Me);var le=m(Me,2);le.__mousedown=Zt,le.__keydown=i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),i.key==="Enter"&&mt())};var Lt=u(le);let Pt;o(le),Gt(le,i=>t(G,i),()=>e(G));var Ue=m(le,2);Ue.__click=Ge;var Ea=u(Ue);S(Ea,{icon:"material-symbols:expand-more",class:"text-lg"}),o(Ue),o(Tt),o(He),o(ne),$e((i,h,F,L,C,c,re,ge,Ie)=>{j=K(ne,1,"music-player fixed bottom-4 right-4 z-101 transition-all duration-300 ease-in-out onload-animation-up flex flex-col items-end pointer-events-none",null,j,{expanded:!e(_),collapsed:e(_)}),Q=K(ae,1,"orb-player w-12 h-12 bg-(--primary) rounded-full shadow-lg cursor-pointer transition-all duration-500 ease-in-out flex items-center justify-center hover:scale-110 active:scale-95",null,Q,{"opacity-0":!e(_),"scale-0":!e(_),"pointer-events-auto":e(_),"pointer-events-none":!e(_)}),Y(ae,"aria-label",i),ht=K(He,1,"expanded-player card-base bg-(--float-panel-bg) shadow-xl rounded-2xl p-4 transition-all duration-500 ease-in-out",null,ht,{"opacity-0":e(_),"scale-95":e(_),"pointer-events-auto":!e(_),"pointer-events-none":e(_)}),Y(yt,"src",h),bt=K(yt,1,"w-full h-full object-cover transition-transform duration-300",null,bt,{spinning:e(g)&&!e(I),"animate-pulse":e(I)}),ce(na,e(N).title),ce(sa,e(N).artist),ce(oa,`${F??""} / ${L??""}`),Y(Se,"title",C),wt=K(we,1,"btn-plain w-8 h-8 rounded-lg flex items-center justify-center",null,wt,{"text-(--primary)":e(y)}),Y(we,"title",c),Y(se,"aria-label",re),Y(se,"aria-valuenow",e(P)>0?e(M)/e(P)*100:0),$t(da,`width: ${e(P)>0?e(M)/e(P)*100:0}%`),Et=K(me,1,"w-10 h-10 rounded-lg",null,Et,{"btn-regular":e(V),"btn-plain":!e(V)}),me.disabled=e(l).length<=1,Ee.disabled=e(l).length<=1,kt=K(pe,1,"btn-regular w-12 h-12 rounded-full",null,kt,{"opacity-50":e(I)}),pe.disabled=e(I),ke.disabled=e(l).length<=1,It=K(Fe,1,"w-10 h-10 rounded-lg",null,It,{"btn-regular":e(R)>0,"btn-plain":e(R)===0}),Y(le,"aria-label",ge),Y(le,"aria-valuenow",e(A)*100),Pt=K(Lt,1,"h-full bg-(--primary) rounded-full transition-all",null,Pt,{"duration-100":!e(Re),"duration-0":e(Re)}),$t(Lt,`width: ${e(A)*100}%`),Y(Ue,"title",Ie)},[()=>U(D.musicExpand),()=>je(e(N).cover),()=>pt(e(M)),()=>pt(e(P)),()=>e(p)==="meting"?U(D.musicSwitchToLocal):U(D.musicSwitchToMeting),()=>U(D.playlist),()=>U(D.musicProgress),()=>U(D.musicVolume),()=>U(D.musicCollapse)]),Z(a,b)};H(ta,a=>{J.enable&&a(aa)})}Z(d,_t),Wa()}qa(["click","keydown","mousedown"]);export{Ir as default};
